<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="reply">



<!-- 	*********************************REPLY_LIST_PAGE******************************	 -->
<select id="reply_list_page"  parameterType="Map"  resultType="vo.ReplyVo">
        select * from
	   (
			select
				rank() over(order by re_idx asc) as no,
				c.*
			from 
			(
			  select * from reply where b_idx=#{b_idx}
			) c
	    )
	    where no between #{start} and #{end}
</select>
<!--	********************************* REPLY_LIST_PAGE********************************* -->


<!-- *********************************REPLY 갯수 확인********************************* -->
   <select id="reply_row_total" parameterType="int"  resultType="int">
       select nvl(count(*),0) from reply where b_idx=#{ b_idx }
   </select>
<!--********************************* REPLY 갯수 확인*********************************-->




<!-- *********************************REPLY_INSERT********************************* -->

<insert id="reply_insert" parameterType="vo.ReplyVo">
		insert into reply values(
										seq_reply_re_idx.nextVal,
										#{re_content},
										sysdate,
										0,
										#{b_idx},
										#{m_idx},
										#{m_name}
												
		)
	
</insert>
<!-- *********************************REPLY_INSERT********************************* -->




<!-- *********************************REPLY_INSERT********************************* -->
<delete id="reply_delete" parameterType="int">
	delete from reply where re_idx = #{re_idx}
</delete>
<!-- *********************************REPLY_INSERT********************************* -->



<!-- ************************** ANSWER_MODIFY_FORM  ***************************** -->

<select id="reply_modify_form" parameterType="int" resultType="vo.ReplyVo">
	select * from reply where re_idx = #{re_idx}
</select>

<!-- ************************** ANSWER_MODIFY_FORM  ***************************** -->


<!-- ************************** ANSWER_MODIFY  ***************************** -->

<update id="reply_update" parameterType="vo.ReplyVo">
 update reply set re_content = #{re_content},
 						re_rdate = sysdate
 						 where re_idx = #{re_idx}
</update>

<!-- ************************** ANSWER_MODIFY  ***************************** -->


<select id="reply_get_b_idx" parameterType="int" resultType="int">
	select b_idx from reply where re_idx = #{re_idx}
</select>



</mapper>
